<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Hospital Database Design</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e22ce 100%);
            padding: 20px;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 25px;
            box-shadow: 0 25px 70px rgba(0,0,0,0.4);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #7e22ce 100%);
            color: white;
            padding: 50px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: moveBackground 20s linear infinite;
        }

        @keyframes moveBackground {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }

        .content {
            padding: 50px;
        }

        .section {
            margin-bottom: 60px;
            animation: fadeInUp 0.8s ease-in;
            opacity: 0;
            animation-fill-mode: forwards;
        }

        .section:nth-child(1) { animation-delay: 0.1s; }
        .section:nth-child(2) { animation-delay: 0.2s; }
        .section:nth-child(3) { animation-delay: 0.3s; }
        .section:nth-child(4) { animation-delay: 0.4s; }
        .section:nth-child(5) { animation-delay: 0.5s; }
        .section:nth-child(6) { animation-delay: 0.6s; }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .section h2 {
            color: #1e3c72;
            font-size: 2.3em;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 4px solid #7e22ce;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .scenario {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
            padding: 40px;
            border-radius: 20px;
            border-left: 6px solid #7e22ce;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            font-size: 1.15em;
            line-height: 2;
            position: relative;
            overflow: hidden;
        }

        .scenario::before {
            content: 'üè•';
            position: absolute;
            font-size: 15em;
            right: -50px;
            bottom: -50px;
            opacity: 0.05;
        }

        .scenario p {
            margin-bottom: 20px;
            text-align: justify;
        }

        .scenario strong {
            color: #7e22ce;
            font-weight: 600;
        }

        .diagram-placeholder {
            background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
            padding: 50px;
            border-radius: 20px;
            margin: 25px 0;
            text-align: center;
            border: 3px dashed #7e22ce;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .diagram-placeholder:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(126, 34, 206, 0.2);
        }

        .diagram-placeholder h3 {
            color: #7e22ce;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .diagram-placeholder p {
            color: #666;
            font-size: 1.1em;
            max-width: 600px;
            line-height: 1.6;
        }

        .diagram-placeholder a {
            color: #1e3c72;
            text-decoration: none;
            font-weight: bold;
            border-bottom: 2px solid #7e22ce;
            transition: all 0.3s ease;
        }

        .diagram-placeholder a:hover {
            color: #7e22ce;
            border-bottom: 2px solid #1e3c72;
        }

        .schema-box {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: #68d391;
            padding: 25px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            overflow-x: auto;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border: 2px solid #7e22ce;
            transition: transform 0.3s ease;
        }

        .schema-box:hover {
            transform: translateX(5px);
        }

        .schema-box h3 {
            color: #fbbf24;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .schema-box p {
            line-height: 1.8;
            font-size: 1.05em;
        }

        .normalization-step {
            background: white;
            border: 3px solid #e0e7ff;
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .normalization-step::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(180deg, #1e3c72, #7e22ce);
            transition: width 0.3s ease;
        }

        .normalization-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(126, 34, 206, 0.2);
            border-color: #7e22ce;
        }

        .normalization-step:hover::before {
            width: 100%;
            opacity: 0.05;
        }

        .normalization-step h3 {
            color: #7e22ce;
            margin-bottom: 20px;
            font-size: 1.7em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .normalization-step .step-number {
            background: linear-gradient(135deg, #1e3c72, #7e22ce);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .sql-code {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            padding: 30px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            overflow-x: auto;
            font-size: 0.95em;
            line-height: 1.8;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border-left: 5px solid #7e22ce;
        }

        .keyword { color: #c084fc; font-weight: bold; }
        .string { color: #86efac; }
        .comment { color: #94a3b8; font-style: italic; }
        .table-name { color: #fbbf24; font-weight: bold; }
        .number { color: #60a5fa; }

        .highlight {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
            color: #92400e;
        }

        .note {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-left: 5px solid #3b82f6;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.1);
        }

        .note strong {
            color: #1e40af;
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .warning {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 5px solid #f59e0b;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .warning strong {
            color: #92400e;
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .info-card {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #7e22ce;
            transition: all 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(126, 34, 206, 0.2);
        }

        .info-card h4 {
            color: #7e22ce;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .info-card ul {
            list-style: none;
            padding-left: 0;
        }

        .info-card li {
            padding: 8px 0;
            border-bottom: 1px solid #ddd;
        }

        .info-card li:last-child {
            border-bottom: none;
        }

        .info-card li::before {
            content: '‚úì ';
            color: #7e22ce;
            font-weight: bold;
            margin-right: 8px;
        }

        .btn {
            background: linear-gradient(135deg, #1e3c72 0%, #7e22ce 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.15em;
            transition: all 0.3s ease;
            margin: 10px 5px;
            box-shadow: 0 5px 20px rgba(126, 34, 206, 0.3);
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(126, 34, 206, 0.5);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .comparison-table th {
            background: linear-gradient(135deg, #1e3c72, #7e22ce);
            color: white;
            padding: 20px;
            text-align: left;
            font-size: 1.1em;
        }

        .comparison-table td {
            padding: 18px 20px;
            border-bottom: 1px solid #e5e7eb;
        }

        .comparison-table tr:hover {
            background: #f9fafb;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        @media (max-width: 768px) {
            .content {
                padding: 25px;
            }

            .header h1 {
                font-size: 2em;
            }

            .section h2 {
                font-size: 1.8em;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• Advanced Hospital Management System</h1>
            <p>Comprehensive Database Design Tutorial - From Scenario to Implementation</p>
        </div>

        <div class="content">
            <div class="section">
                <h2>üìñ Complex Scenario: Metropolitan General Hospital</h2>
                <div class="scenario">
                    <p><strong>Metropolitan General Hospital</strong> is a large healthcare facility that needs a sophisticated database system to manage its complex operations involving patients, medical staff, departments, treatments, and medications.</p>
                    
                    <p>The hospital employs various medical professionals including doctors, nurses, and technicians. Each staff member has an employee number, full name (consisting of first name, middle name, and last name), date of birth, and hire date. Staff members can have multiple contact numbers (office, mobile, emergency contact), and each contact number should include the phone number and the contact type. Additionally, each staff member has a complete address which includes street address, city, state, zip code, and country.</p>
                    
                    <p>The hospital is organized into multiple departments such as Cardiology, Neurology, Pediatrics, and Emergency. Each department has a unique department code, name, and location. Doctors are assigned to specific departments and can work in multiple departments. Each assignment records the start date and the role (Head, Senior, Junior). One doctor serves as the department head. Importantly, the department structure is hierarchical - some departments are sub-departments of others. For example, "Pediatric Cardiology" is a sub-department of "Cardiology".</p>
                    
                    <p>Patients are registered with a unique patient ID, name (first, middle, last), date of birth, blood type, and contact information including multiple phone numbers. Each patient's address is recorded with complete details (street, city, state, zip, country). Patients may have medical insurance, and the system needs to track the insurance provider name, policy number, and coverage details. A patient can have multiple insurance policies.</p>
                    
                    <p>When patients visit the hospital, appointments are scheduled. Each appointment is identified by an appointment number and records the patient, the doctor, date, time, and purpose. During an appointment, the doctor may prescribe medications. The system maintains information about medications including medication code, name, manufacturer, and description. When a medication is prescribed, it creates a prescription record that depends on the appointment - without the appointment, the prescription record has no meaning. Each prescription includes the medication, dosage, frequency (e.g., "twice daily"), duration, and special instructions.</p>
                    
                    <p>The hospital performs various medical tests (blood tests, X-rays, MRI scans, etc.). Each test type has a code, name, description, and standard cost. When a test is ordered during an appointment, it creates a test order that records which test, the ordering doctor, the date ordered, and the results once available. Some tests require other tests to be completed first. For instance, a "Cardiac Stress Test" might require a "Basic ECG" to be done first, and an "Advanced MRI" might require both "Blood Work" and "Basic MRI" as prerequisites.</p>
                    
                    <p>The hospital also needs to track which nurses assist which doctors during procedures. A nurse can assist multiple doctors, and a doctor can have multiple nurses assisting them. This assistance relationship should record the procedure type and the date of assistance.</p>
                    
                    <p>Finally, patients are admitted to hospital rooms for treatment. Each room has a room number and type (private, semi-private, ICU, ward). However, the room assignment is temporary and completely depends on the patient's admission record. The admission record includes the admission date, expected discharge date, actual discharge date (when discharged), and the primary diagnosis. The room information (room number, bed number, floor) is only meaningful in the context of an admission.</p>
                </div>
        </div>
    </div>

    <script>
        // Smooth scroll behavior for all anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Intersection Observer for animated sections
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe all sections
        document.querySelectorAll('.section').forEach(section => {
            observer.observe(section);
        });

        // Add hover effects to code blocks
        document.querySelectorAll('.sql-code, .schema-box').forEach(block => {
            block.addEventListener('mouseenter', function() {
                this.style.transition = 'all 0.3s ease';
            });
        });

        // Highlight active section in viewport
        const sections = document.querySelectorAll('.section');
        const highlightActiveSection = () => {
            const scrollPosition = window.scrollY + 200;

            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                
                if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                    section.style.transition = 'all 0.3s ease';
                }
            });
        };

        window.addEventListener('scroll', highlightActiveSection);

        // Add copy functionality to code blocks
        document.querySelectorAll('.sql-code').forEach(codeBlock => {
            const copyBtn = document.createElement('button');
            copyBtn.innerHTML = 'üìã Copy Code';
            copyBtn.style.cssText = `
                position: absolute;
                top: 10px;
                right: 10px;
                background: rgba(126, 34, 206, 0.9);
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 0.9em;
                font-weight: 600;
                transition: all 0.3s ease;
                z-index: 10;
            `;
            
            copyBtn.addEventListener('mouseenter', function() {
                this.style.background = 'rgba(126, 34, 206, 1)';
                this.style.transform = 'scale(1.05)';
            });
            
            copyBtn.addEventListener('mouseleave', function() {
                this.style.background = 'rgba(126, 34, 206, 0.9)';
                this.style.transform = 'scale(1)';
            });
            
            copyBtn.addEventListener('click', function() {
                const code = codeBlock.innerText;
                navigator.clipboard.writeText(code).then(() => {
                    this.innerHTML = '‚úÖ Copied!';
                    setTimeout(() => {
                        this.innerHTML = 'üìã Copy Code';
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy:', err);
                    this.innerHTML = '‚ùå Failed';
                    setTimeout(() => {
                        this.innerHTML = 'üìã Copy Code';
                    }, 2000);
                });
            });
            
            codeBlock.style.position = 'relative';
            codeBlock.appendChild(copyBtn);
        });

        // Progress indicator
        const createProgressBar = () => {
            const progressBar = document.createElement('div');
            progressBar.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 0%;
                height: 4px;
                background: linear-gradient(90deg, #1e3c72, #7e22ce);
                z-index: 9999;
                transition: width 0.1s ease;
            `;
            document.body.appendChild(progressBar);
            
            window.addEventListener('scroll', () => {
                const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolled = (window.scrollY / windowHeight) * 100;
                progressBar.style.width = scrolled + '%';
            });
        };

        createProgressBar();

        // Add animation to normalization steps on hover
        document.querySelectorAll('.normalization-step').forEach(step => {
            step.addEventListener('mouseenter', function() {
                const stepNumber = this.querySelector('.step-number');
                if (stepNumber) {
                    stepNumber.style.transform = 'rotate(360deg)';
                    stepNumber.style.transition = 'transform 0.6s ease';
                }
            });
            
            step.addEventListener('mouseleave', function() {
                const stepNumber = this.querySelector('.step-number');
                if (stepNumber) {
                    stepNumber.style.transform = 'rotate(0deg)';
                }
            });
        });

        // Info cards animation
        document.querySelectorAll('.info-card').forEach((card, index) => {
            card.style.animationDelay = `${index * 0.1}s`;
            card.style.animation = 'fadeInUp 0.6s ease forwards';
        });

        // Table row highlighting
        document.querySelectorAll('.comparison-table tr').forEach(row => {
            row.addEventListener('mouseenter', function() {
                if (this.querySelector('td')) {
                    this.style.background = 'linear-gradient(90deg, #f0f9ff, #e0e7ff)';
                    this.style.transform = 'scale(1.01)';
                    this.style.transition = 'all 0.3s ease';
                }
            });
            
            row.addEventListener('mouseleave', function() {
                if (this.querySelector('td')) {
                    this.style.background = '';
                    this.style.transform = 'scale(1)';
                }
            });
        });

        // Console welcome message
        console.log('%cüè• Advanced Hospital Database Design System', 
            'color: #7e22ce; font-size: 20px; font-weight: bold;');
        console.log('%cExplore the complete database design from scenario to SQL implementation!', 
            'color: #1e3c72; font-size: 14px;');
        
        // Add keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Press 'T' to scroll to top
            if (e.key === 't' || e.key === 'T') {
                window.scrollTo({top: 0, behavior: 'smooth'});
            }
            // Press 'B' to scroll to bottom
            if (e.key === 'b' || e.key === 'B') {
                window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'});
            }
        });

        // Show keyboard shortcuts hint
        setTimeout(() => {
            const hint = document.createElement('div');
            hint.innerHTML = 'üí° Keyboard shortcuts: Press <strong>T</strong> for top, <strong>B</strong> for bottom';
            hint.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: rgba(30, 60, 114, 0.95);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                font-size: 0.9em;
                z-index: 9998;
                box-shadow: 0 5px 20px rgba(0,0,0,0.3);
                opacity: 0;
                transition: opacity 0.5s ease;
            `;
            document.body.appendChild(hint);
            
            setTimeout(() => {
                hint.style.opacity = '1';
            }, 100);
            
            setTimeout(() => {
                hint.style.opacity = '0';
                setTimeout(() => hint.remove(), 500);
            }, 5000);
        }, 2000);

        // Add visual feedback for schema boxes
        document.querySelectorAll('.schema-box').forEach(box => {
            box.addEventListener('click', function() {
                this.style.transform = 'translateX(5px)';
                this.style.boxShadow = '0 10px 35px rgba(126, 34, 206, 0.4)';
                
                setTimeout(() => {
                    this.style.transform = 'translateX(0)';
                    this.style.boxShadow = '0 8px 25px rgba(0,0,0,0.3)';
                }, 200);
            });
        });

        // Add fade-in effect for notes and warnings
        const fadeInElements = document.querySelectorAll('.note, .warning');
        const fadeInObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeInUp 0.8s ease forwards';
                }
            });
        }, { threshold: 0.3 });

        fadeInElements.forEach(el => {
            el.style.opacity = '0';
            fadeInObserver.observe(el);
        });

        console.log('%c‚ú® Interactive features loaded successfully!', 
            'color: #10b981; font-size: 12px; font-weight: bold;');
    </script>
</body>
</html>>
            </div>

            <div class="section">
                <h2>üé® Entity-Relationship Diagram</h2>
                <div class="diagram-placeholder">
                    <div>
                        <img 
                                src="../images/ER2.png" 
                                alt="ER Diagram"
                                style="
                                    width: 100%;
                                    height: auto;
                                    max-width: 1048px;
                                    display: block;
                                    margin: 0 auto;
                                    padding: 0 10px;
                                ">

                    </div>
                </div>

                <div class="info-grid">
                    <div class="info-card">
                        <h4>üîÑ Recursive Relationships</h4>
                        <ul>
                            <li>Department hierarchy (parent-child)</li>
                            <li>Test prerequisites (test requires test)</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h4>üìä Multivalued Attributes</h4>
                        <ul>
                            <li>Staff contact numbers</li>
                            <li>Patient phone numbers</li>
                            <li>Patient insurance policies</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h4>üß© Composite Attributes</h4>
                        <ul>
                            <li>Name (First, Middle, Last)</li>
                            <li>Address (Street, City, State, Zip)</li>
                            <li>Contact (Number, Type)</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h4>‚ö° Weak Entities</h4>
                        <ul>
                            <li>Prescription (depends on Appointment)</li>
                            <li>Room Assignment (depends on Admission)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üìã Initial Relational Schema (Before Normalization)</h2>
                <div class="schema-box">
                    <h3>STAFF</h3>
                    <p>EmployeeNumber, FirstName, MiddleName, LastName, DateOfBirth, HireDate, Phone1, Phone2, Phone3, ContactType1, ContactType2, ContactType3, Street, City, State, ZipCode, Country</p>
                </div>
                <div class="schema-box">
                    <h3>DEPARTMENT</h3>
                    <p>DepartmentCode, DepartmentName, Location, ParentDepartmentCode, HeadDoctorID</p>
                </div>
                <div class="schema-box">
                    <h3>DOCTOR_DEPARTMENT</h3>
                    <p>EmployeeNumber, DepartmentCode, StartDate, Role</p>
                </div>
                <div class="schema-box">
                    <h3>PATIENT</h3>
                    <p>PatientID, FirstName, MiddleName, LastName, DateOfBirth, BloodType, Phone1, Phone2, Street, City, State, ZipCode, Country, Insurance1Provider, Insurance1Policy, Insurance1Coverage, Insurance2Provider, Insurance2Policy, Insurance2Coverage</p>
                </div>
                <div class="schema-box">
                    <h3>APPOINTMENT</h3>
                    <p>AppointmentNumber, PatientID, DoctorID, AppointmentDate, AppointmentTime, Purpose</p>
                </div>
                <div class="schema-box">
                    <h3>MEDICATION</h3>
                    <p>MedicationCode, MedicationName, Manufacturer, Description</p>
                </div>
                <div class="schema-box">
                    <h3>PRESCRIPTION</h3>
                    <p>AppointmentNumber, MedicationCode, Dosage, Frequency, Duration, Instructions</p>
                </div>
                <div class="schema-box">
                    <h3>TEST_TYPE</h3>
                    <p>TestCode, TestName, Description, StandardCost</p>
                </div>
                <div class="schema-box">
                    <h3>TEST_ORDER</h3>
                    <p>TestOrderID, AppointmentNumber, TestCode, OrderDate, Results</p>
                </div>
                <div class="schema-box">
                    <h3>TEST_PREREQUISITE</h3>
                    <p>TestCode, PrerequisiteTestCode</p>
                </div>
                <div class="schema-box">
                    <h3>NURSE_ASSISTANCE</h3>
                    <p>NurseID, DoctorID, ProcedureType, AssistanceDate</p>
                </div>
                <div class="schema-box">
                    <h3>ADMISSION</h3>
                    <p>AdmissionID, PatientID, AdmissionDate, ExpectedDischargeDate, ActualDischargeDate, PrimaryDiagnosis, RoomNumber, BedNumber, Floor</p>
                </div>
            </div>

            <div class="section">
                <h2>üîÑ Normalization Process</h2>
                
                <div class="normalization-step">
                    <h3><span class="step-number">1</span> First Normal Form (1NF)</h3>
                    <p><strong>Problem Identified:</strong> Multiple repeating groups violate 1NF</p>
                    <ul style="margin: 15px 0; padding-left: 25px;">
                        <li style="margin: 10px 0;">STAFF table has Phone1, Phone2, Phone3 and ContactType1, ContactType2, ContactType3</li>
                        <li style="margin: 10px 0;">PATIENT table has multiple phone numbers and multiple insurance policies</li>
                        <li style="margin: 10px 0;">Composite attributes (Name, Address) need decomposition</li>
                    </ul>
                    <div class="note">
                        <strong>Solution Applied:</strong>
                        Create separate tables for multivalued attributes:
                        <br>‚Ä¢ STAFF_CONTACT (EmployeeNumber, PhoneNumber, ContactType)
                        <br>‚Ä¢ PATIENT_PHONE (PatientID, PhoneNumber)
                        <br>‚Ä¢ PATIENT_INSURANCE (PatientID, InsuranceProvider, PolicyNumber, Coverage)
                        <br>‚Ä¢ Decompose composite attributes into atomic values
                    </div>
                </div>

                <div class="normalization-step">
                    <h3><span class="step-number">2</span> Second Normal Form (2NF)</h3>
                    <p><strong>Problem Identified:</strong> Partial dependencies on composite primary keys</p>
                    <ul style="margin: 15px 0; padding-left: 25px;">
                        <li style="margin: 10px 0;">In PRESCRIPTION: MedicationCode determines medication details, not the full key</li>
                        <li style="margin: 10px 0;">Composite attributes should be separated into their own entities</li>
                    </ul>
                    <div class="note">
                        <strong>Solution Applied:</strong>
                        <br>‚Ä¢ Create STAFF_ADDRESS table (EmployeeNumber, Street, City, State, ZipCode, Country)
                        <br>‚Ä¢ Create PATIENT_ADDRESS table (PatientID, Street, City, State, ZipCode, Country)
                        <br>‚Ä¢ Ensure all non-key attributes fully depend on the entire primary key
                    </div>
                </div>

                <div class="normalization-step">
                    <h3><span class="step-number">3</span> Third Normal Form (3NF)</h3>
                    <p><strong>Problem Identified:</strong> Transitive dependencies exist</p>
                    <ul style="margin: 15px 0; padding-left: 25px;">
                        <li style="margin: 10px 0;">In DEPARTMENT: HeadDoctorID ‚Üí DoctorName creates transitive dependency</li>
                        <li style="margin: 10px 0;">Any derived attributes should be removed or calculated</li>
                    </ul>
                    <div class="note">
                        <strong>Solution Applied:</strong>
                        <br>‚Ä¢ Remove all transitive dependencies
                        <br>‚Ä¢ Separate independent entities
                        <br>‚Ä¢ Ensure all non-key attributes depend only on the primary key
                    </div>
                </div>

                <div class="warning">
                    <strong>‚ö†Ô∏è Special Considerations for Weak Entities:</strong>
                    <br>‚Ä¢ PRESCRIPTION depends on APPOINTMENT - cannot exist independently
                    <br>‚Ä¢ ROOM_ASSIGNMENT depends on ADMISSION - has no meaning without admission
                    <br>‚Ä¢ These entities include the parent's primary key as part of their own primary key
                </div>
            </div>

            <div class="section">
                <h2>‚úÖ Final Normalized Schema</h2>
                
                <div class="schema-box">
                    <h3>STAFF</h3>
                    <p><span class="highlight">EmployeeNumber</span>, FirstName, MiddleName, LastName, DateOfBirth, HireDate, StaffType</p>
                </div>

                <div class="schema-box">
                    <h3>STAFF_CONTACT</h3>
                    <p><span class="highlight">EmployeeNumber, PhoneNumber</span>, ContactType</p>
                    <p style="color: #94a3b8;">FK: EmployeeNumber ‚Üí STAFF</p>
                </div>

                <div class="schema-box">
                    <h3>STAFF_ADDRESS</h3>
                    <p><span class="highlight">EmployeeNumber</span>, Street, City, State, ZipCode, Country</p>
                    <p style="color: #94a3b8;">FK: EmployeeNumber ‚Üí STAFF</p>
                </div>

                <div class="schema-box">
                    <h3>DEPARTMENT</h3>
                    <p><span class="highlight">DepartmentCode</span>, DepartmentName, Location, ParentDepartmentCode, HeadDoctorID</p>
                    <p style="color: #94a3b8;">FK: ParentDepartmentCode ‚Üí DEPARTMENT (Recursive)</p>
                    <p style="color: #94a3b8;">FK: HeadDoctorID ‚Üí STAFF</p>
                </div>

                <div class="schema-box">
                    <h3>DOCTOR_DEPARTMENT_ASSIGNMENT</h3>
                    <p><span class="highlight">EmployeeNumber, DepartmentCode, StartDate</span>, Role</p>
                    <p style="color: #94a3b8;">FK: EmployeeNumber ‚Üí STAFF, DepartmentCode ‚Üí DEPARTMENT</p>
                </div>

                <div class="schema-box">
                    <h3>PATIENT</h3>
                    <p><span class="highlight">PatientID</span>, FirstName, MiddleName, LastName, DateOfBirth, BloodType</p>
                </div>

                <div class="schema-box">
                    <h3>PATIENT_PHONE</h3>
                    <p><span class="highlight">PatientID, PhoneNumber</span></p>
                    <p style="color: #94a3b8;">FK: PatientID ‚Üí PATIENT</p>
                </div>

                <div class="schema-box">
                    <h3>PATIENT_ADDRESS</h3>
                    <p><span class="highlight">PatientID</span>, Street, City, State, ZipCode, Country</p>
                    <p style="color: #94a3b8;">FK: PatientID ‚Üí PATIENT</p>
                </div>

                <div class="schema-box">
                    <h3>PATIENT_INSURANCE</h3>
                    <p><span class="highlight">PatientID, PolicyNumber</span>, InsuranceProvider, CoverageDetails</p>
                    <p style="color: #94a3b8;">FK: PatientID ‚Üí PATIENT</p>
                </div>

                <div class="schema-box">
                    <h3>APPOINTMENT</h3>
                    <p><span class="highlight">AppointmentNumber</span>, PatientID, DoctorID, AppointmentDate, AppointmentTime, Purpose</p>
                    <p style="color: #94a3b8;">FK: PatientID ‚Üí PATIENT, DoctorID ‚Üí STAFF</p>
                </div>

                <div class="schema-box">
                    <h3>MEDICATION</h3>
                    <p><span class="highlight">MedicationCode</span>, MedicationName, Manufacturer, Description</p>
                </div>

                <div class="schema-box">
                    <h3>PRESCRIPTION (Weak Entity)</h3>
                    <p><span class="highlight">AppointmentNumber, MedicationCode</span>, Dosage, Frequency, Duration, SpecialInstructions</p>
                    <p style="color: #94a3b8;">FK: AppointmentNumber ‚Üí APPOINTMENT (Identifying), MedicationCode ‚Üí MEDICATION</p>
                </div>

                <div class="schema-box">
                    <h3>TEST_TYPE</h3>
                    <p><span class="highlight">TestCode</span>, TestName, Description, StandardCost</p>
                </div>

                <div class="schema-box">
                    <h3>TEST_ORDER</h3>
                    <p><span class="highlight">TestOrderID</span>, AppointmentNumber, TestCode, OrderDate, ResultDate, Results</p>
                    <p style="color: #94a3b8;">FK: AppointmentNumber ‚Üí APPOINTMENT, TestCode ‚Üí TEST_TYPE</p>
                </div>

                <div class="schema-box">
                    <h3>TEST_PREREQUISITE (Recursive)</h3>
                    <p><span class="highlight">TestCode, PrerequisiteTestCode</span></p>
                    <p style="color: #94a3b8;">FK: TestCode ‚Üí TEST_TYPE, PrerequisiteTestCode ‚Üí TEST_TYPE</p>
                </div>

                <div class="schema-box">
                    <h3>NURSE_DOCTOR_ASSISTANCE</h3>
                    <p><span class="highlight">NurseID, DoctorID, ProcedureType, AssistanceDate</span></p>
                    <p style="color: #94a3b8;">FK: NurseID ‚Üí STAFF, DoctorID ‚Üí STAFF</p>
                </div>

                <div class="schema-box">
                    <h3>ADMISSION</h3>
                    <p><span class="highlight">AdmissionID</span>, PatientID, AdmissionDate, ExpectedDischargeDate, ActualDischargeDate, PrimaryDiagnosis</p>
                    <p style="color: #94a3b8;">FK: PatientID ‚Üí PATIENT</p>
                </div>

                <div class="schema-box">
                    <h3>ROOM_ASSIGNMENT (Weak Entity)</h3>
                    <p><span class="highlight">AdmissionID</span>, RoomNumber, BedNumber, Floor, RoomType</p>
                    <p style="color: #94a3b8;">FK: AdmissionID ‚Üí ADMISSION (Identifying)</p>
                </div>
            </div>

            <div class="section">
                <h2>üíª SQL Implementation</h2>
                
                <h3 style="color: #1e3c72; margin-top: 30px; font-size: 1.5em;">Create Tables - Core Entities</h3>
                <div class="sql-code">
<span class="comment">-- Create STAFF table (includes doctors, nurses, technicians)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">STAFF</span> (
    EmployeeNumber <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY KEY</span>,
    FirstName <span class="keyword">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,
    MiddleName <span class="keyword">VARCHAR</span>(<span class="number">50</span>),
    LastName <span class="keyword">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,
    DateOfBirth <span class="keyword">DATE</span> <span class="keyword">NOT NULL</span>,
    HireDate <span class="keyword">DATE</span> <span class="keyword">NOT NULL</span>,
    StaffType <span class="keyword">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">CHECK</span> (StaffType <span class="keyword">IN</span> (<span class="string">'Doctor'</span>, <span class="string">'Nurse'</span>, <span class="string">'Technician'</span>, <span class="string">'Other'</span>))
);

<span class="comment">-- Create STAFF_CONTACT table (multivalued attribute)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">STAFF_CONTACT</span> (
    EmployeeNumber <span class="keyword">VARCHAR</span>(<span class="number">15</span>),
    PhoneNumber <span class="keyword">VARCHAR</span>(<span class="number">20</span>),
    ContactType <span class="keyword">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">CHECK</span> (ContactType <span class="keyword">IN</span> (<span class="string">'Office'</span>, <span class="string">'Mobile'</span>, <span class="string">'Emergency'</span>)),
    <span class="keyword">PRIMARY KEY</span> (EmployeeNumber, PhoneNumber),
    <span class="keyword">FOREIGN KEY</span> (EmployeeNumber) <span class="keyword">REFERENCES</span> STAFF(EmployeeNumber)
        <span class="keyword">ON DELETE CASCADE</span>
);

<span class="comment">-- Create STAFF_ADDRESS table (composite attribute)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">STAFF_ADDRESS</span> (
    EmployeeNumber <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY KEY</span>,
    Street <span class="keyword">VARCHAR</span>(<span class="number">100</span>),
    City <span class="keyword">VARCHAR</span>(<span class="number">50</span>),
    State <span class="keyword">VARCHAR</span>(<span class="number">50</span>),
    ZipCode <span class="keyword">VARCHAR</span>(<span class="number">10</span>),
    Country <span class="keyword">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="string">'USA'</span>,
    <span class="keyword">FOREIGN KEY</span> (EmployeeNumber) <span class="keyword">REFERENCES</span> STAFF(EmployeeNumber)
        <span class="keyword">ON DELETE CASCADE</span>
);

<span class="comment">-- Create DEPARTMENT table (with recursive relationship)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">DEPARTMENT</span> (
    DepartmentCode <span class="keyword">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">PRIMARY KEY</span>,
    DepartmentName <span class="keyword">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT NULL</span>,
    Location <span class="keyword">VARCHAR</span>(<span class="number">100</span>),
    ParentDepartmentCode <span class="keyword">VARCHAR</span>(<span class="number">10</span>),
    HeadDoctorID <span class="keyword">VARCHAR</span>(<span class="number">15</span>),
    <span class="keyword">FOREIGN KEY</span> (ParentDepartmentCode) <span class="keyword">REFERENCES</span> DEPARTMENT(DepartmentCode)
        <span class="keyword">ON DELETE SET NULL</span>,
    <span class="keyword">FOREIGN KEY</span> (HeadDoctorID) <span class="keyword">REFERENCES</span> STAFF(EmployeeNumber)
        <span class="keyword">ON DELETE SET NULL</span>
);

<span class="comment">-- Create DOCTOR_DEPARTMENT_ASSIGNMENT table (many-to-many)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">DOCTOR_DEPARTMENT_ASSIGNMENT</span> (
    EmployeeNumber <span class="keyword">VARCHAR</span>(<span class="number">15</span>),
    DepartmentCode <span class="keyword">VARCHAR</span>(<span class="number">10</span>),
    StartDate <span class="keyword">DATE</span>,
    Role <span class="keyword">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">CHECK</span> (Role <span class="keyword">IN</span> (<span class="string">'Head'</span>, <span class="string">'Senior'</span>, <span class="string">'Junior'</span>, <span class="string">'Consultant'</span>)),
    <span class="keyword">PRIMARY KEY</span> (EmployeeNumber, DepartmentCode, StartDate),
    <span class="keyword">FOREIGN KEY</span> (EmployeeNumber) <span class="keyword">REFERENCES</span> STAFF(EmployeeNumber)
        <span class="keyword">ON DELETE CASCADE</span>,
    <span class="keyword">FOREIGN KEY</span> (DepartmentCode) <span class="keyword">REFERENCES</span> DEPARTMENT(DepartmentCode)
        <span class="keyword">ON DELETE CASCADE</span>
);

<span class="comment">-- Create PATIENT table</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">PATIENT</span> (
    PatientID <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY KEY</span>,
    FirstName <span class="keyword">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,
    MiddleName <span class="keyword">VARCHAR</span>(<span class="number">50</span>),
    LastName <span class="keyword">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,
    DateOfBirth <span class="keyword">DATE</span> <span class="keyword">NOT NULL</span>,
    BloodType <span class="keyword">VARCHAR</span>(<span class="number">5</span>) <span class="keyword">CHECK</span> (BloodType <span class="keyword">IN</span> (<span class="string">'A+'</span>, <span class="string">'A-'</span>, <span class="string">'B+'</span>, <span class="string">'B-'</span>, <span class="string">'AB+'</span>, <span class="string">'AB-'</span>, <span class="string">'O+'</span>, <span class="string">'O-'</span>))
);

<span class="comment">-- Create PATIENT_PHONE table (multivalued attribute)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">PATIENT_PHONE</span> (
    PatientID <span class="keyword">VARCHAR</span>(<span class="number">15</span>),
    PhoneNumber <span class="keyword">VARCHAR</span>(<span class="number">20</span>),
    <span class="keyword">PRIMARY KEY</span> (PatientID, PhoneNumber),
    <span class="keyword">FOREIGN KEY</span> (PatientID) <span class="keyword">REFERENCES</span> PATIENT(PatientID)
        <span class="keyword">ON DELETE CASCADE</span>
);

<span class="comment">-- Create PATIENT_ADDRESS table (composite attribute)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">PATIENT_ADDRESS</span> (
    PatientID <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY KEY</span>,
    Street <span class="keyword">VARCHAR</span>(<span class="number">100</span>),
    City <span class="keyword">VARCHAR</span>(<span class="number">50</span>),
    State <span class="keyword">VARCHAR</span>(<span class="number">50</span>),
    ZipCode <span class="keyword">VARCHAR</span>(<span class="number">10</span>),
    Country <span class="keyword">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="string">'USA'</span>,
    <span class="keyword">FOREIGN KEY</span> (PatientID) <span class="keyword">REFERENCES</span> PATIENT(PatientID)
        <span class="keyword">ON DELETE CASCADE</span>
);

<span class="comment">-- Create PATIENT_INSURANCE table (multivalued attribute)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">PATIENT_INSURANCE</span> (
    PatientID <span class="keyword">VARCHAR</span>(<span class="number">15</span>),
    PolicyNumber <span class="keyword">VARCHAR</span>(<span class="number">30</span>),
    InsuranceProvider <span class="keyword">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT NULL</span>,
    CoverageDetails <span class="keyword">TEXT</span>,
    <span class="keyword">PRIMARY KEY</span> (PatientID, PolicyNumber),
    <span class="keyword">FOREIGN KEY</span> (PatientID) <span class="keyword">REFERENCES</span> PATIENT(PatientID)
        <span class="keyword">ON DELETE CASCADE</span>
);
</div>

                <h3 style="color: #1e3c72; margin-top: 40px; font-size: 1.5em;">Appointment and Medical Services</h3>
                <div class="sql-code">
<span class="comment">-- Create APPOINTMENT table</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">APPOINTMENT</span> (
    AppointmentNumber <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY KEY</span>,
    PatientID <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">NOT NULL</span>,
    DoctorID <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">NOT NULL</span>,
    AppointmentDate <span class="keyword">DATE</span> <span class="keyword">NOT NULL</span>,
    AppointmentTime <span class="keyword">TIME</span> <span class="keyword">NOT NULL</span>,
    Purpose <span class="keyword">TEXT</span>,
    <span class="keyword">FOREIGN KEY</span> (PatientID) <span class="keyword">REFERENCES</span> PATIENT(PatientID)
        <span class="keyword">ON DELETE CASCADE</span>,
    <span class="keyword">FOREIGN KEY</span> (DoctorID) <span class="keyword">REFERENCES</span> STAFF(EmployeeNumber)
        <span class="keyword">ON DELETE CASCADE</span>
);

<span class="comment">-- Create MEDICATION table</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">MEDICATION</span> (
    MedicationCode <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY KEY</span>,
    MedicationName <span class="keyword">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT NULL</span>,
    Manufacturer <span class="keyword">VARCHAR</span>(<span class="number">100</span>),
    Description <span class="keyword">TEXT</span>
);

<span class="comment">-- Create PRESCRIPTION table (WEAK ENTITY - depends on APPOINTMENT)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">PRESCRIPTION</span> (
    AppointmentNumber <span class="keyword">VARCHAR</span>(<span class="number">15</span>),
    MedicationCode <span class="keyword">VARCHAR</span>(<span class="number">15</span>),
    Dosage <span class="keyword">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,
    Frequency <span class="keyword">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,
    Duration <span class="keyword">VARCHAR</span>(<span class="number">30</span>),
    SpecialInstructions <span class="keyword">TEXT</span>,
    <span class="keyword">PRIMARY KEY</span> (AppointmentNumber, MedicationCode),
    <span class="keyword">FOREIGN KEY</span> (AppointmentNumber) <span class="keyword">REFERENCES</span> APPOINTMENT(AppointmentNumber)
        <span class="keyword">ON DELETE CASCADE</span>,
    <span class="keyword">FOREIGN KEY</span> (MedicationCode) <span class="keyword">REFERENCES</span> MEDICATION(MedicationCode)
        <span class="keyword">ON DELETE CASCADE</span>
);

<span class="comment">-- Create TEST_TYPE table</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">TEST_TYPE</span> (
    TestCode <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY KEY</span>,
    TestName <span class="keyword">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT NULL</span>,
    Description <span class="keyword">TEXT</span>,
    StandardCost <span class="keyword">DECIMAL</span>(<span class="number">10, 2</span>)
);

<span class="comment">-- Create TEST_PREREQUISITE table (RECURSIVE RELATIONSHIP)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">TEST_PREREQUISITE</span> (
    TestCode <span class="keyword">VARCHAR</span>(<span class="number">15</span>),
    PrerequisiteTestCode <span class="keyword">VARCHAR</span>(<span class="number">15</span>),
    <span class="keyword">PRIMARY KEY</span> (TestCode, PrerequisiteTestCode),
    <span class="keyword">FOREIGN KEY</span> (TestCode) <span class="keyword">REFERENCES</span> TEST_TYPE(TestCode)
        <span class="keyword">ON DELETE CASCADE</span>,
    <span class="keyword">FOREIGN KEY</span> (PrerequisiteTestCode) <span class="keyword">REFERENCES</span> TEST_TYPE(TestCode)
        <span class="keyword">ON DELETE CASCADE</span>,
    <span class="keyword">CHECK</span> (TestCode != PrerequisiteTestCode)
);

<span class="comment">-- Create TEST_ORDER table</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">TEST_ORDER</span> (
    TestOrderID <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY KEY</span>,
    AppointmentNumber <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">NOT NULL</span>,
    TestCode <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">NOT NULL</span>,
    OrderDate <span class="keyword">DATE</span> <span class="keyword">NOT NULL</span>,
    ResultDate <span class="keyword">DATE</span>,
    Results <span class="keyword">TEXT</span>,
    <span class="keyword">FOREIGN KEY</span> (AppointmentNumber) <span class="keyword">REFERENCES</span> APPOINTMENT(AppointmentNumber)
        <span class="keyword">ON DELETE CASCADE</span>,
    <span class="keyword">FOREIGN KEY</span> (TestCode) <span class="keyword">REFERENCES</span> TEST_TYPE(TestCode)
        <span class="keyword">ON DELETE CASCADE</span>
);

<span class="comment">-- Create NURSE_DOCTOR_ASSISTANCE table (many-to-many)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">NURSE_DOCTOR_ASSISTANCE</span> (
    NurseID <span class="keyword">VARCHAR</span>(<span class="number">15</span>),
    DoctorID <span class="keyword">VARCHAR</span>(<span class="number">15</span>),
    ProcedureType <span class="keyword">VARCHAR</span>(<span class="number">100</span>),
    AssistanceDate <span class="keyword">DATE</span>,
    <span class="keyword">PRIMARY KEY</span> (NurseID, DoctorID, ProcedureType, AssistanceDate),
    <span class="keyword">FOREIGN KEY</span> (NurseID) <span class="keyword">REFERENCES</span> STAFF(EmployeeNumber)
        <span class="keyword">ON DELETE CASCADE</span>,
    <span class="keyword">FOREIGN KEY</span> (DoctorID) <span class="keyword">REFERENCES</span> STAFF(EmployeeNumber)
        <span class="keyword">ON DELETE CASCADE</span>
);
</div>

                <h3 style="color: #1e3c72; margin-top: 40px; font-size: 1.5em;">Patient Admission and Room Assignment</h3>
                <div class="sql-code">
<span class="comment">-- Create ADMISSION table</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">ADMISSION</span> (
    AdmissionID <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY KEY</span>,
    PatientID <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">NOT NULL</span>,
    AdmissionDate <span class="keyword">DATE</span> <span class="keyword">NOT NULL</span>,
    ExpectedDischargeDate <span class="keyword">DATE</span>,
    ActualDischargeDate <span class="keyword">DATE</span>,
    PrimaryDiagnosis <span class="keyword">TEXT</span>,
    <span class="keyword">FOREIGN KEY</span> (PatientID) <span class="keyword">REFERENCES</span> PATIENT(PatientID)
        <span class="keyword">ON DELETE CASCADE</span>,
    <span class="keyword">CHECK</span> (ExpectedDischargeDate >= AdmissionDate),
    <span class="keyword">CHECK</span> (ActualDischargeDate >= AdmissionDate <span class="keyword">OR</span> ActualDischargeDate <span class="keyword">IS NULL</span>)
);

<span class="comment">-- Create ROOM_ASSIGNMENT table (WEAK ENTITY - depends on ADMISSION)</span>
<span class="keyword">CREATE TABLE</span> <span class="table-name">ROOM_ASSIGNMENT</span> (
    AdmissionID <span class="keyword">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY KEY</span>,
    RoomNumber <span class="keyword">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT NULL</span>,
    BedNumber <span class="keyword">VARCHAR</span>(<span class="number">5</span>) <span class="keyword">NOT NULL</span>,
    Floor <span class="keyword">INT</span> <span class="keyword">NOT NULL</span>,
    RoomType <span class="keyword">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">CHECK</span> (RoomType <span class="keyword">IN</span> (<span class="string">'Private'</span>, <span class="string">'Semi-Private'</span>, <span class="string">'ICU'</span>, <span class="string">'Ward'</span>)),
    <span class="keyword">FOREIGN KEY</span> (AdmissionID) <span class="keyword">REFERENCES</span> ADMISSION(AdmissionID)
        <span class="keyword">ON DELETE CASCADE</span>
);
</div>
</div>
</body>
</html>